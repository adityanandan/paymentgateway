<!doctype html>
{% load static%}
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
      <link rel="stylesheet" href="{%static 'home.css' %}">
    <title>Donation</title>
    <script type="text/javascript">
      function validate(){

        var cred_value = document.getElementById("amount");

        if (cred_value.value <= 0) {
         alert("Amount should be greater than 0");
         return false;
       }
       return true;
      }

    </script>
  </head>
  <body style="background-color: #1cd1eced;">
    <div class="container jumbotron">
      <div class="col-xs-6 col-xs-offset-3">
        <div class="panel panel-default">
            <div class="panel-heading" class="single_input wow fadeInUp" data-wow-duration="1s">
                <h1 class="text-center">Donation Form </h1>
            </div>
        <div class="panel-body">
          <form method="post">
            {%csrf_token%}
            <div class="form-group">
              <label for="name" class="col-sm-3 col-form-label">Name :</label>
                <input type="text" name="name" class="form-control" id="name" required>
            </div>
            <div class="form-group ">
              <label for="exampleInputEmail" class="col-sm-4 col-form-label" >Email address :</label>
              <input type="email" class="form-control" name="email" id="exampleInputEmail" aria-describedby="emailHelp" required>
            </div>
            <div class="form-group">
              <label for="mobile" class="col-sm-3 col-form-label">Contact :</label>
                <input type="text" name="contact" class="form-control" id="mobile" required>
            </div>
            <div class="form-group">
              <label for="amount" class="col-sm-3 col-form-label">Amount :</label>
                <input type="number" name="amount" class="form-control" id="amount" required>
            </div>
            <button type="submit" onclick="return validate()" class="btn btn-success btn-lg" name="button">Submit</button>
          </form>
        </div>
  </div>
</div>
</div>
{% if payment%}
<div class="text-center mx-auto">
  <form action="/success/" method="POST">
  <script
      src="https://checkout.razorpay.com/v1/checkout.js"
      data-key="rzp_test_8yjMqc2GDcAc1T" // Enter the Key ID generated from the Dashboard
      data-amount="{{payment.amount}}" // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
      data-currency="INR"
      data-order_id="{{payment.id}}"//This is a sample Order ID. Pass the `id` obtained in the response of the previous step.
      data-buttontext="Click here to Pay"
      data-name="DONATION_TSF"
      data-description="Test transaction"
      data-image="https://example.com/your_logo.jpg"
      data-prefill.name="{{username}}"
      data-prefill.contact="{{contact}}"
      data-prefill.email="{{email}}"
      data-theme.color="#F37254"
  ></script>
  <input type="hidden" custom="Hidden Element" name="hidden">
  </form>
  {% endif %}

</div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  </body>
</html>
